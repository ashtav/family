(window.webpackJsonp=window.webpackJsonp||[]).push([[11,2,5],{403:function(t,e,r){var content=r(405);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(17).default)("0836a539",content,!0,{sourceMap:!1})},404:function(t,e,r){"use strict";r(403)},405:function(t,e,r){var n=r(16)(!1);n.push([t.i,".backdrop[data-v-373e2f8e]{position:fixed;background:rgba(0,0,0,.5);width:100%;left:0;top:0;height:100%;z-index:1040}.modal-header[data-v-373e2f8e]{background:#fff;border-bottom:1px solid #eee;padding:15px 12px 15px 20px;display:flex;align-items:center}.modal-footer[data-v-373e2f8e]{border:none}.modal-close[data-v-373e2f8e]{border:none;background:none;color:#999}.modal-close[data-v-373e2f8e]:hover{color:#666}.modal-dialog-scrollable .modal-content[data-v-373e2f8e]{overflow:hidden}.modal-dialog-scrollable .modal-content .modal-body[data-v-373e2f8e]{overflow:auto;max-height:calc(100vh - 220px)}",""]),t.exports=n},406:function(t,e,r){"use strict";r.r(e);r(39),r(27),r(28),r(11),r(48),r(33),r(49);var n=r(18),o=(r(70),r(83),r(59),r(26));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var c={props:{id:{type:String,default:""},title:{type:String,default:"Modal Title"},size:{type:String,default:"modal-md"}},data:function(){return{active:!1,display:"none",backdrop:!1}},methods:{dismiss:function(t){t.target.closest(".modal-content")&&!t.target.parentElement.classList.contains("modal-close")||this.modal(this.id)}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.d)("modal",{ids:function(t){return t.actives}})),watch:{ids:function(t){var e=this;t.includes(this.id)?(this.display="block",this.backdrop=!0,setTimeout((function(){e.active=!0}),150)):(this.active=!1,this.backdrop=!1,setTimeout((function(){e.display="none"}),100))}}},d=c,m=(r(404),r(20)),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"modal fade",class:t.active?"show":"",style:{display:t.display},on:{click:t.dismiss}},[r("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-dialog-centered",class:t.size,attrs:{role:"document"}},[r("div",{staticClass:"modal-content flat-style"},[r("div",{staticClass:"modal-header"},[r("h5",{staticClass:"modal-title",domProps:{textContent:t._s(t.title)}}),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticStyle:{background:"#fafbfc","border-radius":"2px"}},[t._t("default")],2)])])]),t._v(" "),r("Transition",[t.backdrop?r("div",{staticClass:"backdrop"}):t._e()])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"modal-close",attrs:{type:"button"}},[e("i",{staticClass:"la la-lg la-close"})])}],!1,null,"373e2f8e",null);e.default=component.exports},417:function(t,e,r){var content=r(428);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(17).default)("d04e94fa",content,!0,{sourceMap:!1})},420:function(t,e,r){"use strict";r.r(e);r(39),r(27),r(28),r(11),r(48),r(33),r(49);var n=r(6),o=r(18),l=(r(50),r(40),r(26));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{forms:{submitting:!1,filename:null},formData:{photo:null}}},computed:d({},Object(l.d)("users",{user:function(t){return t.user_details}})),methods:d(d({},Object(l.b)("users",["changePhoto"])),{},{_onFileChange:function(t){var e=this,r=t.target.files[0];if(null!=r){this.$refs.file.value="";if(r.size>3072e3)this.toastr("Invalid","Maksimal ukuran foto adalah 3 MB.","warning");else if(-1!==r.type.indexOf("image/"))if("function"==typeof FileReader){var n=new FileReader;n.onload=function(t){e.formData.photo=t.target.result,e.forms.filename=r.name},n.readAsDataURL(r)}else this.toastr("Invalid","Browser anda tidak support FileReader","warning");else this.toastr("Invalid","Format tidak valid.","warning")}},_submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.forms.submitting=!0,r=t.base64ToFile(t.formData.photo,"file.jpg"),(n=new FormData).append("photo",r),n.append("_method","PUT"),e.next=7,t.changePhoto({id:t.user.id,data:n});case 7:e.sent&&(t.modal("change-avatar"),t.toastr("Good!","Foto profil berhasil diperbarui.","success")),t.forms.submitting=!1;case 10:case"end":return e.stop()}}),e)})))()}})},v=r(20),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{id:"change-avatar",title:"Perbarui Foto Profil"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t._submit.apply(null,arguments)}}},[n("div",{staticClass:"modal-body text-center"},[n("div",{staticClass:"avatar my-3"},[n("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.formData.photo||t.user.photo||r(224),alt:"avatar",height:"260",width:"260"}})]),t._v(" "),n("br"),t._v(" "),n("input",{ref:"file",staticClass:"d-none",attrs:{type:"file",accept:".png,.jpg,.jpeg"},on:{change:t._onFileChange}}),t._v(" "),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.$refs.file.click()}}},[n("i",{staticClass:"la la-lg la-image mr-50"}),t._v(" Pilih Foto\n        ")]),t._v(" "),n("div",{staticClass:"text-muted mt-2",domProps:{textContent:t._s(t.forms.filename||"Tidak ada foto yang dipilih")}})]),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal",disabled:t.forms.submitting},on:{click:function(e){return t.modal("change-avatar")}}},[t._v("\n          Batal\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.forms.submitting||null==t.formData.photo},domProps:{textContent:t._s(t.forms.submitting?"Menyimpan...":"Simpan")}})])])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:r(406).default})},427:function(t,e,r){"use strict";r(417)},428:function(t,e,r){var n=r(16)(!1);n.push([t.i,".main-profile[data-v-f2641772]{position:relative;width:100%;height:150px;margin-bottom:20px}.main-profile .control[data-v-f2641772]{position:absolute;top:15px;right:15px}.main-profile .img-avatar[data-v-f2641772]{width:120px;height:120px;-o-object-fit:cover;object-fit:cover;position:absolute;left:15px;bottom:-25px;border-radius:3px}",""]),t.exports=n},435:function(t,e,r){"use strict";r.r(e);r(39),r(27),r(28),r(11),r(48),r(33),r(49);var n=r(6),o=r(18),l=(r(59),r(50),r(26));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={layout:"dashboard",name:"profile",data:function(){return{isLoading:!0,controls:{can_delete:!1}}},computed:d(d({},Object(l.d)("users",{user:function(t){return t.user_details}})),Object(l.d)("family",{parent:function(t){return t.parent},families:function(t){return t.families}})),methods:d(d(d({},Object(l.b)("users",["getUserDetails","deleteUser"])),Object(l.b)("family",["getUsers","getParent","getFamilies"])),{},{getUser:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,r=t.$route.params.id,e.next=4,t.getUserDetails(r);case 4:t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},_getParent:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$route.params.id,e.next=3,t.getParent(r);case 3:case"end":return e.stop()}}),e)})))()},_changeAvatar:function(){this.modal("change-avatar")},_editProfile:function(){this.modal("user")},_setFamily:function(){this.modal("form-set-family"),this.getUsers(this.user.id)},_delete:function(){window.confirm("Yakin ingin menghapus ".concat(this.user.first_name," dari daftar anggota?"))&&this.deleteUser(this.user.id)},_seeProfile:function(t){var e=this;this.$router.push("/dashboard/profile?id="+t),setTimeout((function(){e.getUser(),e._getParent()}),0)}}),mounted:function(){this.getUser(),this._getParent()},watch:{user:{handler:function(t){this.controls.can_delete=!t.user||t.user&&"Super Admin"!=t.user.role},deep:!0},parent:{handler:function(t){var e=this.$route.query.id;this.getFamilies(e)},deep:!0}}},v=(r(427),r(20)),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"content-header row mb-2"},[n("div",{staticClass:"content-header-left col-md-9 col-12 mb-2"},[n("div",{staticClass:"row breadcrumbs-top"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"breadcrumb-wrapper"},[n("ol",{staticClass:"breadcrumb pl-0"},[n("li",{staticClass:"breadcrumb-item"},[n("nuxt-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")])],1),t._v(" "),n("li",{staticClass:"breadcrumb-item"},[n("nuxt-link",{attrs:{to:"/u"}},[t._v("Family")])],1),t._v(" "),n("li",{staticClass:"breadcrumb-item"},[t._v("Profile")])])])])])]),t._v(" "),n("div",{staticClass:"content-header-right text-md-right col-md-3 col-12"},[t.controls.can_delete?n("button",{staticClass:"btn btn-danger",on:{click:t._delete}},[n("i",{staticClass:"la la-lg la-trash"}),t._v(" Hapus\n      ")]):t._e()])]),t._v(" "),t.isLoading?n("div",[n("i",{staticClass:"spinner-border spinner-border-sm mr-1"}),t._v(" Memuat data\n    anggota...\n  ")]):n("div",{staticClass:"content-body"},[n("section",{attrs:{id:"profile-info"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-5 col-md-6 col-12"},[n("div",{staticClass:"card card-developer-meetup"},[n("div",{staticClass:"meetup-img-wrapper rounded-top text-center main-profile"},[n("div",{staticClass:"btn-group control"},[n("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:t._changeAvatar}},[n("i",{staticClass:"la la-lg la-image"})]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:t._editProfile}},[n("i",{staticClass:"la la-lg la-user-edit"})])]),t._v(" "),n("img",{staticClass:"img-avatar",attrs:{src:t.user.photo||r(224),alt:""}})]),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"meetup-header d-flex align-items-center"},[n("div",{staticClass:"meetup-day"},[n("h3",{staticClass:"mb-0",domProps:{textContent:t._s(t.user.age)}}),t._v(" "),n("h6",{staticClass:"mb-0"},[t._v("TH")])]),t._v(" "),n("div",{staticClass:"my-auto"},[n("h4",{staticClass:"card-title mb-25",domProps:{textContent:t._s(t.user.first_name+" "+(t.user.last_name||""))}}),t._v(" "),n("p",{staticClass:"card-text mb-0",domProps:{textContent:t._s(t.user.gender)}})])]),t._v(" "),n("div",{staticClass:"media"},[t._m(0),t._v(" "),n("div",{staticClass:"media-body"},[n("h6",{staticClass:"mb-0"},[t._v("Tempat & Tgl Lahir")]),t._v(" "),n("small",{domProps:{textContent:t._s(t.user.place_of_birth+", "+t.user.dmy)}})])]),t._v(" "),n("div",{staticClass:"media"},[t._m(1),t._v(" "),n("div",{staticClass:"media-body"},[n("h6",{staticClass:"mb-0"},[t._v("Anak Dari")]),t._v(" "),n("small",{domProps:{textContent:t._s(t.parent.loading?"Memuat...":t.parent.text||"-")}})]),t._v(" "),n("div",{staticClass:"d-flex align-items-center"},[t.parent.loading?t._e():n("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:t._setFamily}},[n("i",{staticClass:"la la-lg la-pen"})])])]),t._v(" "),n("div",{staticClass:"avatar-group"},[n("h6",{staticClass:"align-self-center cursor-pointer mb-0"},[n("i",{staticClass:"la la-lg la-user mr-1"}),t._v("\n                  "+t._s(t.families.data.length)+" Bersaudara\n                ")])])])]),t._v(" "),n("h6",{staticClass:"my-2 text-muted"},[t._v("Keluarga Inti")]),t._v(" "),n("div",{staticClass:"card card-employee-task"},[t._m(2),t._v(" "),n("div",{staticClass:"card-body"},t._l(t.families.data,(function(e,i){return n("div",{key:i,staticClass:"\n                  employee-task\n                  d-flex\n                  justify-content-between\n                  align-items-center\n                "},[n("div",{staticClass:"media"},[n("div",{staticClass:"avatar mr-75"},[n("img",{staticClass:"rounded",attrs:{src:e.user.photo||r(224),width:"42",height:"42",alt:"Avatar"}})]),t._v(" "),n("div",{staticClass:"media-body my-auto"},[n("nuxt-link",{attrs:{to:"/dashboard/profile?id="+e.id},nativeOn:{click:function(r){return t._seeProfile(e.user.id)}}},[n("h6",{staticClass:"mb-0",domProps:{textContent:t._s(e.user.first_name)}})]),t._v(" "),n("small",{domProps:{textContent:t._s(e.user.gender)}})],1)]),t._v(" "),t._m(3,!0)])})),0)])]),t._v(" "),n("div",{staticClass:"col-lg-4 col-12 order-2 order-lg-1"},[n("div",{staticClass:"card mb-1"},[t._m(4),t._v(" "),n("ul",{staticClass:"list-group list-group-flush"},[n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("Tentang")]),t._v("\n                "+t._s(t.user.about||"-")+"\n              ")]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("Agama")]),t._v("\n                "+t._s(t.user.religion||"-")+"\n              ")]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("Status Pernikahan")]),t._v("\n                "+t._s(t.user.marriage_status||"-")+"\n              ")]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("Golongan Darah")]),t._v("\n                "+t._s(t.user.blood||"-")+"\n              ")]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("Alamat")]),t._v("\n                "+t._s(t.user.address||"-")+"\n              ")]),t._v(" "),n("li",{staticClass:"list-group-item"},[n("h5",{staticClass:"mb-75"},[t._v("No. HP")]),t._v("\n                "+t._s(t.user.phone||"-")+"\n              ")])]),t._v(" "),n("div",{staticClass:"px-2 py-1"},[n("button",{staticClass:"btn btn-block btn-outline-primary",on:{click:function(e){return t.modal("form-about-user")}}},[t._v("\n                Perbarui\n              ")])])])]),t._v(" "),n("div",{staticClass:"col-lg-3 col-12 order-2 order-lg-1"},["Meninggal Dunia"==t.user.history?n("div",{staticClass:"card bg-danger text-white mb-2"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title text-white"},[t._v("Telah Meninggal")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("\n                "+t._s(t.user.first_name+" "+(t.user.last_name||""))+" telah\n                meninggal pada tanggal "+t._s(t.dateFormat(t.user.date_of_death))+"\n              ")]),t._v(" "),n("p",{staticClass:"card-text"},[t._v("\n                Penyebab : "+t._s(t.user.cause_of_death||"-")+"\n              ")])])]):t._e(),t._v(" "),n("div",{staticClass:"text-muted"},[n("h6",{staticClass:"m-0"},[t._v("Bergabung Pada")]),t._v(" "),n("small",[t._v(t._s(t.user.created_at))]),t._v(" "),n("br"),t._v(" "),t.user.created_by?n("small",[t._v("Ditambahkan Oleh\n              "),n("nuxt-link",{attrs:{to:"/"},domProps:{textContent:t._s(t.user.created_by)}})],1):t._e()])])])])]),t._v(" "),n("FormChangeAvatar")],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar bg-light-primary rounded mr-1"},[e("div",{staticClass:"avatar-content"},[e("i",{staticClass:"la la-lg la-calendar"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar bg-light-primary rounded mr-1"},[e("div",{staticClass:"avatar-content"},[e("i",{staticClass:"la la-lg la-info-circle"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h4",{staticClass:"card-title"},[t._v("Keluarga Inti")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex align-items-center"},[r("small",{staticClass:"text-muted mr-75"},[t._v("9hr 20m")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h4",{staticClass:"card-title"},[t._v("Informasi Detail")]),t._v(" "),r("i",{staticClass:"font-medium-3 cursor-pointer",attrs:{"data-feather":"more-vertical"}})])}],!1,null,"f2641772",null);e.default=component.exports;installComponents(component,{FormChangeAvatar:r(420).default})}}]);